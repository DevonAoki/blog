<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Hive安装</title>
    <link href="/2022/12/27/Hive%E5%AE%89%E8%A3%85/"/>
    <url>/2022/12/27/Hive%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h3 id="1、将hive安装包上传到-x2F-opt-x2F-software-x2F-进行解压"><a href="#1、将hive安装包上传到-x2F-opt-x2F-software-x2F-进行解压" class="headerlink" title="1、将hive安装包上传到&#x2F;opt&#x2F;software&#x2F;,进行解压"></a>1、将hive安装包上传到&#x2F;opt&#x2F;software&#x2F;,进行解压</h3><img src="https://raw.githubusercontent.com/DevonAoki/img/main/img202212271053604.png" style="zoom: 80%;" /><p><img src="https://raw.githubusercontent.com/DevonAoki/img/main/img202212271102874.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 解压</span><br>tar -zxvf apache-hive-2.3.4-bin.tar.gz -C /opt/apps/<br></code></pre></td></tr></table></figure><h5 id="1-1、进入-x2F-opt-x2F-apps-将文件名改为hive-2-3-4"><a href="#1-1、进入-x2F-opt-x2F-apps-将文件名改为hive-2-3-4" class="headerlink" title="1.1、进入&#x2F;opt&#x2F;apps 将文件名改为hive.2.3.4"></a>1.1、进入&#x2F;opt&#x2F;apps 将文件名改为hive.2.3.4</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /opt/apps/<br><span class="hljs-built_in">mv</span> apache-hive-2.3.4-bin hive2.3.4<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/DevonAoki/img/main/img202212271104153.png" alt="image-20221227110409873"></p><h3 id="2、配置环境变量"><a href="#2、配置环境变量" class="headerlink" title="2、配置环境变量"></a>2、配置环境变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /etc/profile<span class="hljs-comment">#打开文件</span><br><span class="hljs-built_in">export</span> HIVE_HOME=/opt/apps/hive2.3.4<span class="hljs-comment">#输入内容</span><br><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$JAVA_HOME</span>/bin:<span class="hljs-variable">$HADOOP_HOME</span>/bin:<span class="hljs-variable">$HADOOP_HOME</span>/sbin:<span class="hljs-variable">$HIVE_HOME</span>/bin<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/DevonAoki/img/main/img202212271107557.png" alt="image-20221227110728924"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> /etc/profile <span class="hljs-comment">#使文件生效</span><br></code></pre></td></tr></table></figure><h3 id="3、安装mysql环境（之前已完成）"><a href="#3、安装mysql环境（之前已完成）" class="headerlink" title="3、安装mysql环境（之前已完成）"></a>3、安装mysql环境（之前已完成）</h3><h5 id="3-1、上传mysql的驱动包、放入hive安装目录下的lib目录中"><a href="#3-1、上传mysql的驱动包、放入hive安装目录下的lib目录中" class="headerlink" title="3.1、上传mysql的驱动包、放入hive安装目录下的lib目录中"></a>3.1、上传mysql的驱动包、放入hive安装目录下的lib目录中</h5><p><img src="https://raw.githubusercontent.com/DevonAoki/img/main/img202212271111062.png" alt="image-20221227111155793"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> /opt/software/mysql-connector-java-8.0.20.jar /opt/apps/hive2.3.4/lib/<br></code></pre></td></tr></table></figure><h3 id="4、配置hive-env-sh（在hive的conf目录中-x2F-opt-x2F-apps-x2F-hive2-3-4-x2F-conf）"><a href="#4、配置hive-env-sh（在hive的conf目录中-x2F-opt-x2F-apps-x2F-hive2-3-4-x2F-conf）" class="headerlink" title="4、配置hive-env.sh（在hive的conf目录中&#x2F;opt&#x2F;apps&#x2F;hive2.3.4&#x2F;conf）"></a>4、配置hive-env.sh（在hive的conf目录中&#x2F;opt&#x2F;apps&#x2F;hive2.3.4&#x2F;conf）</h3><h5 id="4-1、将模板文件拷贝并重命名"><a href="#4-1、将模板文件拷贝并重命名" class="headerlink" title="4.1、将模板文件拷贝并重命名"></a>4.1、将模板文件拷贝并重命名</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> hive-env.sh.template hive-env.sh<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/DevonAoki/img/main/img202212271212328.png" alt="image-20221227111724773"></p><h5 id="4-2、配置hive-env-sh文件"><a href="#4-2、配置hive-env-sh文件" class="headerlink" title="4.2、配置hive-env.sh文件"></a>4.2、配置hive-env.sh文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim hive-env.sh<br><span class="hljs-comment">#内容如下：</span><br><span class="hljs-comment">#hadoop的安装路径</span><br><span class="hljs-built_in">export</span> HADOOP_HOME=/opt/apps/hadoop/<br><span class="hljs-comment">#java的安装路径</span><br><span class="hljs-built_in">export</span> JAVA_HOME=/opt/apps/jdk/<br><span class="hljs-comment">#hive配置文件的路径</span><br><span class="hljs-built_in">export</span> HIVE_CONF_DIR=/opt/apps/hive2.3.4/conf<br><span class="hljs-comment">#hive使用的库的路径</span><br><span class="hljs-built_in">export</span> HIVE_AUX_JARS_PATH=/opt/apps/hive2.3.4/lib<br><span class="hljs-comment">#hive的安装路径</span><br><span class="hljs-built_in">export</span> HIVE_HOME=/opt/apps/hive2.3.4<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/DevonAoki/img/main/img202212271121312.png" alt="image-20221227112116402"></p><h3 id="5、配置hive-site-xml（在hive的conf目录中）找到相应属性修改值。或者删除所有默认配置，重新添加属性"><a href="#5、配置hive-site-xml（在hive的conf目录中）找到相应属性修改值。或者删除所有默认配置，重新添加属性" class="headerlink" title="5、配置hive-site.xml（在hive的conf目录中）找到相应属性修改值。或者删除所有默认配置，重新添加属性"></a>5、配置hive-site.xml（在hive的conf目录中）找到相应属性修改值。或者删除所有默认配置，重新添加属性</h3><h5 id="5-1、将模板文件拷贝并重命名"><a href="#5-1、将模板文件拷贝并重命名" class="headerlink" title="5.1、将模板文件拷贝并重命名"></a>5.1、将模板文件拷贝并重命名</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> hive-default.xml.template hive-site.xml<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/DevonAoki/img/main/img202212271124205.png" alt="image-20221227112436619"></p><h5 id="5-2、配置hive-site-xml文件"><a href="#5-2、配置hive-site-xml文件" class="headerlink" title="5.2、配置hive-site.xml文件"></a>5.2、配置hive-site.xml文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim hive-site.xml<br><span class="hljs-comment">#配置文件如下</span><br>&lt;configuration&gt;<br>&lt;!--配置mysql的连接字符串--&gt;<br>&lt;property&gt;<br>  &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;<br>  &lt;value&gt;jdbc:mysql://master:3306/hive？createDatabaseIfNotExist=<span class="hljs-literal">true</span>&amp;amp;characterEncoding=UTF-8&lt;/value&gt;<br>  &lt;description&gt;JDBC connect string <span class="hljs-keyword">for</span> a JDBC metastore&lt;/description&gt;<br>&lt;/property&gt;<br>&lt;!--配置mysql的连接驱动--&gt;<br>&lt;property&gt;<br>  &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;<br>  &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;<br>  &lt;description&gt;Driver class name <span class="hljs-keyword">for</span> a JDBC metastore&lt;/description&gt;<br>&lt;/property&gt;<br>&lt;!--配置登录mysql的用户--&gt;<br>&lt;property&gt;<br>  &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;<br>  &lt;value&gt;root&lt;/value&gt;<br>  &lt;description&gt;username to use against metastore database&lt;/description&gt;<br>&lt;/property&gt;<br>&lt;!--配置登录mysql的密码--&gt;<br>&lt;property&gt;<br>  &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;<br>  &lt;value&gt;123456&lt;/value&gt;<br>  &lt;description&gt;password to use against metastore database&lt;/description&gt;<br>&lt;/property&gt;<br>&lt;property&gt;<br>&lt;!-- 关闭元数据存储版本的验证 --&gt;<br> &lt;name&gt;hive.metastore.schema.verification&lt;/name&gt;<br> &lt;value&gt;<span class="hljs-literal">false</span>&lt;/value&gt;<br> &lt;/property&gt;<br>&lt;/configuration&gt;<br><br></code></pre></td></tr></table></figure><hr><p>善用vim搜索功能</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#例</span><br>打一个斜杠 /(这里输入你想搜索的文字)<br>/javax.jdo.option.ConnectionURL<br></code></pre></td></tr></table></figure><hr><h3 id="6、连接测试"><a href="#6、连接测试" class="headerlink" title="6、连接测试"></a>6、连接测试</h3><h4 id="配置完上述属性，本地模式即完成，测试能否在mysql中创建hive元数据库。前提：hadoop集群和mysql都要先启动"><a href="#配置完上述属性，本地模式即完成，测试能否在mysql中创建hive元数据库。前提：hadoop集群和mysql都要先启动" class="headerlink" title="配置完上述属性，本地模式即完成，测试能否在mysql中创建hive元数据库。前提：hadoop集群和mysql都要先启动"></a>配置完上述属性，本地模式即完成，测试能否在mysql中创建hive元数据库。前提：hadoop集群和mysql都要先启动</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">service mysqld status <span class="hljs-comment">#查看mysql服务是否启动</span><br>service mysqld start <span class="hljs-comment">#启动mysql服务,没有启动的手动启动</span><br>schematool -initSchema -dbType mysql <span class="hljs-comment">#初始化元数据命令</span><br>start-all.sh <span class="hljs-comment">#启动Hadoop</span><br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/DevonAoki/img/main/img202212271151972.png" alt="image-20221227115143381"></p><h2 id="未完成"><a href="#未完成" class="headerlink" title="未完成"></a>未完成</h2>]]></content>
    
    
    <categories>
      
      <category>Hadoop</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hive</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>安装Hadoop</title>
    <link href="/2022/12/24/%E5%AE%89%E8%A3%85Hadoop/"/>
    <url>/2022/12/24/%E5%AE%89%E8%A3%85Hadoop/</url>
    
    <content type="html"><![CDATA[<h3 id="1、安装一台虚拟机（主机名master），克隆两台（克隆后的主机名分别为slave1，slave2）"><a href="#1、安装一台虚拟机（主机名master），克隆两台（克隆后的主机名分别为slave1，slave2）" class="headerlink" title="1、安装一台虚拟机（主机名master），克隆两台（克隆后的主机名分别为slave1，slave2）"></a>1、安装一台虚拟机（主机名master），克隆两台（克隆后的主机名分别为slave1，slave2）</h3><h4 id="1-1、-修改主机名，每台都做（可做可不做）vi-x2F-etc-x2F-hostname把原来的内容删除，加上新的主机名，比如master主机，在hostname文件把主机名修改为master。修改之后使用reboot命令重启主机。"><a href="#1-1、-修改主机名，每台都做（可做可不做）vi-x2F-etc-x2F-hostname把原来的内容删除，加上新的主机名，比如master主机，在hostname文件把主机名修改为master。修改之后使用reboot命令重启主机。" class="headerlink" title="1.1、 修改主机名，每台都做（可做可不做）vi &#x2F;etc&#x2F;hostname把原来的内容删除，加上新的主机名，比如master主机，在hostname文件把主机名修改为master。修改之后使用reboot命令重启主机。"></a>1.1、 修改主机名，每台都做（可做可不做）vi &#x2F;etc&#x2F;hostname把原来的内容删除，加上新的主机名，比如master主机，在hostname文件把主机名修改为master。修改之后使用reboot命令重启主机。</h4><h3 id="2、配置master主机网络Ip地址"><a href="#2、配置master主机网络Ip地址" class="headerlink" title="2、配置master主机网络Ip地址"></a>2、配置master主机网络Ip地址</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs abnf">vi /etc/sysconfig/network-scripts/ifcfg-ens33<br><span class="hljs-attribute">TYPE</span><span class="hljs-operator">=</span>Ethernet<br><span class="hljs-attribute">BOOTPROTO</span><span class="hljs-operator">=</span>static<br><span class="hljs-attribute">IPADDR</span><span class="hljs-operator">=</span><span class="hljs-number">192.168</span>.<span class="hljs-number">128.100</span><br><span class="hljs-attribute">NETMASK</span><span class="hljs-operator">=</span><span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-attribute">GATEWAY</span><span class="hljs-operator">=</span><span class="hljs-number">192.168</span>.<span class="hljs-number">128.2</span><br><span class="hljs-attribute">NAME</span><span class="hljs-operator">=</span>ens33DEVICE<span class="hljs-operator">=</span>ens33<br><span class="hljs-attribute">ONBOOT</span><span class="hljs-operator">=</span>yes<br></code></pre></td></tr></table></figure><br/><h3 id="3、打开VM虚拟机编辑-gt-虚拟网络编辑器-gt-更改设置-gt-选择”VMnet8”-gt-更改子网IP、NAT设置、DHCP设置（修改至同一网段，如这里设置IP为IPADDR-x3D-192-168-128-100，网段就要改成192-168-128开头）。"><a href="#3、打开VM虚拟机编辑-gt-虚拟网络编辑器-gt-更改设置-gt-选择”VMnet8”-gt-更改子网IP、NAT设置、DHCP设置（修改至同一网段，如这里设置IP为IPADDR-x3D-192-168-128-100，网段就要改成192-168-128开头）。" class="headerlink" title="3、打开VM虚拟机编辑-&gt;虚拟网络编辑器-&gt;更改设置-&gt;选择”VMnet8”-&gt;更改子网IP、NAT设置、DHCP设置（修改至同一网段，如这里设置IP为IPADDR&#x3D;192.168.128.100，网段就要改成192.168.128开头）。"></a>3、打开VM虚拟机编辑-&gt;虚拟网络编辑器-&gt;更改设置-&gt;选择”VMnet8”-&gt;更改子网IP、NAT设置、DHCP设置（修改至同一网段，如这里设置IP为IPADDR&#x3D;192.168.128.100，网段就要改成192.168.128开头）。</h3><h5 id="3-1、网络重启"><a href="#3-1、网络重启" class="headerlink" title="3.1、网络重启"></a>3.1、网络重启</h5><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">service</span> network restart<br>ping <span class="hljs-number">192.168.128.2</span>  <span class="hljs-comment">#测试是否连通</span><br></code></pre></td></tr></table></figure><h4 id="3-2、slave1和slave2主机网络IP地址的配置方法和配置master的一样，但是要主要每台主机的IP地址不能相同。"><a href="#3-2、slave1和slave2主机网络IP地址的配置方法和配置master的一样，但是要主要每台主机的IP地址不能相同。" class="headerlink" title="3.2、slave1和slave2主机网络IP地址的配置方法和配置master的一样，但是要主要每台主机的IP地址不能相同。"></a>3.2、slave1和slave2主机网络IP地址的配置方法和配置master的一样，但是要主要每台主机的IP地址不能相同。</h4><h4 id="3-3、配置域名解析信息"><a href="#3-3、配置域名解析信息" class="headerlink" title="3.3、配置域名解析信息"></a>3.3、配置域名解析信息</h4><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">vi /etc/hosts<br><span class="hljs-number">192.168.128.100</span> master<br><span class="hljs-number">192.168.128.101</span> slave1<br><span class="hljs-number">192.168.128.102</span> slave2<br></code></pre></td></tr></table></figure><p>&#x3D;&#x3D;<strong>注：每台虚拟机都要配置</strong>&#x3D;&#x3D;</p><h4 id="3-4、安装XME5，使用Xshell连接3台主机（master-slave1-slave2）。"><a href="#3-4、安装XME5，使用Xshell连接3台主机（master-slave1-slave2）。" class="headerlink" title="3.4、安装XME5，使用Xshell连接3台主机（master,slave1,slave2）。"></a>3.4、安装XME5，使用Xshell连接3台主机（master,slave1,slave2）。</h4><h3 id="4、配置jdk和hadoop的环境"><a href="#4、配置jdk和hadoop的环境" class="headerlink" title="4、配置jdk和hadoop的环境"></a>4、配置jdk和hadoop的环境</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /opt/<br><span class="hljs-built_in">mkdir</span> apps<br><span class="hljs-built_in">mkdir</span> software <span class="hljs-comment">#创建两个文件夹</span><br></code></pre></td></tr></table></figure><p>&#x3D;&#x3D;<strong>说明：apps放置解压文件，software放置压缩文件。</strong>&#x3D;&#x3D;</p><h5 id="4-1、使用xftp工具上传压缩文件到-x2F-opt-x2F-software文件夹，然后解压。"><a href="#4-1、使用xftp工具上传压缩文件到-x2F-opt-x2F-software文件夹，然后解压。" class="headerlink" title="4.1、使用xftp工具上传压缩文件到&#x2F;opt&#x2F;software文件夹，然后解压。"></a>4.1、使用xftp工具上传压缩文件到&#x2F;opt&#x2F;software文件夹，然后解压。</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cd</span> software/<br><span class="hljs-attribute">tar</span> zxvf jdk-<span class="hljs-number">8</span>u271-linux-x64.tar.gz -C /opt/apps/<br><span class="hljs-attribute">tar</span> zxvf hadoop-<span class="hljs-number">2</span>.<span class="hljs-number">7</span>.<span class="hljs-number">6</span>.tar.gz -C /opt/apps/ #解压到/opt/apps<br><span class="hljs-attribute">mv</span> jdk1.<span class="hljs-number">8</span>.<span class="hljs-number">0</span>_271/ jdk<br><span class="hljs-attribute">mv</span> hadoop-<span class="hljs-number">2</span>.<span class="hljs-number">7</span>.<span class="hljs-number">6</span>/ hadoop #更改文件名<br></code></pre></td></tr></table></figure><p>&#x3D;&#x3D;**说明：更改文件名为了方便 **&#x3D;&#x3D;</p><h5 id="4-2、设置环境变量"><a href="#4-2、设置环境变量" class="headerlink" title="4.2、设置环境变量"></a>4.2、设置环境变量</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">vi /etc/profile<br><span class="hljs-built_in">export</span> JAVA_HOME=/opt/apps/jdk<br><span class="hljs-built_in">export</span> HADOOP_HOME=/opt/apps/hadoop<br><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$JAVA_HOME</span>/bin:<span class="hljs-variable">$HADOOP_HOME</span>/bin:<span class="hljs-variable">$HADOOP_HOME</span>/sbin:<span class="hljs-variable">$PATH</span> <span class="hljs-comment">#添加环境变量</span><br><span class="hljs-built_in">source</span> /etc/profile <span class="hljs-comment">#使文件生效</span><br><span class="hljs-comment">#查看文件是否生效</span><br>java -version<br>hadoop version<br></code></pre></td></tr></table></figure><h3 id="5、将解压数据和环境变量发送给其他主机"><a href="#5、将解压数据和环境变量发送给其他主机" class="headerlink" title="5、将解压数据和环境变量发送给其他主机"></a>5、将解压数据和环境变量发送给其他主机</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">scp -r <span class="hljs-regexp">/etc/</span>profile root@slave1:<span class="hljs-regexp">/etc/</span><br>scp -r <span class="hljs-regexp">/etc/</span>profile root@slave2:<span class="hljs-regexp">/etc/</span><br>source <span class="hljs-regexp">/etc/</span>profile <span class="hljs-comment">#slave1,slave2都要输入这个命令使其生效</span><br></code></pre></td></tr></table></figure><h3 id="6、使用rsa加密技术，生成公钥和私钥。一路回车即可进入-x2F-ssh目录下，将id-rsa-pub复制到对方所有节点。"><a href="#6、使用rsa加密技术，生成公钥和私钥。一路回车即可进入-x2F-ssh目录下，将id-rsa-pub复制到对方所有节点。" class="headerlink" title="6、使用rsa加密技术，生成公钥和私钥。一路回车即可进入~&#x2F;.ssh目录下，将id_rsa.pub复制到对方所有节点。"></a>6、使用rsa加密技术，生成公钥和私钥。一路回车即可进入~&#x2F;.ssh目录下，将id_rsa.pub复制到对方所有节点。</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@<span class="hljs-keyword">master</span> <span class="hljs-title">~]# cd</span> ~<br>[root@<span class="hljs-keyword">master</span> <span class="hljs-title">~]# ssh-keygen</span> -t rsa<br>[root@<span class="hljs-keyword">master</span> <span class="hljs-title">~]# cd</span> ~/.ssh<br>[root@<span class="hljs-keyword">master</span> <span class="hljs-title">.ssh</span>]<span class="hljs-comment"># ssh-copy-id -i id_rsa.pub root@master</span><br>[root@<span class="hljs-keyword">master</span> <span class="hljs-title">.ssh</span>]<span class="hljs-comment"># ssh-copy-id -i id_rsa.pub root@slave1</span><br>[root@<span class="hljs-keyword">master</span> <span class="hljs-title">.ssh</span>]<span class="hljs-comment"># ssh-copy-id -i id_rsa.pub root@slave2</span><br></code></pre></td></tr></table></figure><p>&#x3D;&#x3D;注：每个命令都要在所以虚拟机输入一次&#x3D;&#x3D;</p><h4 id="6-1、验证是否成功"><a href="#6-1、验证是否成功" class="headerlink" title="6.1、验证是否成功"></a>6.1、验证是否成功</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">ssh <span class="hljs-keyword">master</span><br><span class="hljs-title">ssh</span> slave1<br>ssh slave2<br></code></pre></td></tr></table></figure><h3 id="7、修改hadoop配置"><a href="#7、修改hadoop配置" class="headerlink" title="7、修改hadoop配置"></a>7、修改hadoop配置</h3><h4 id="7-1、配置core-site-xml"><a href="#7-1、配置core-site-xml" class="headerlink" title="7.1、配置core-site.xml"></a>7.1、配置core-site.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml">cd /opt/apps/hadoop/etc/hadoop/<br>vi core-site.xml<br>#配置内容<br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 指定NameNode的地址 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>fs.defaultFS<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>hdfs://master:8020<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 指定hadoop数据的存储目录 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hadoop.tmp.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>/opt/apps/hadoop/tmp<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="7-2、配置hdfs-site-xml"><a href="#7-2、配置hdfs-site-xml" class="headerlink" title="7.2、配置hdfs-site.xml"></a>7.2、配置hdfs-site.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml">vi hdfs-site.xml<br>#配置内容<br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-comment">&lt;!-- NameNode的 web端访问地址--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.namenode.http-address<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>master:50070<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 第2NameNode web端访问地址--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.namenode.secondary.http-address<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>slave1:50090<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="7-3、配置yarn-site-xml"><a href="#7-3、配置yarn-site-xml" class="headerlink" title="7.3、配置yarn-site.xml"></a>7.3、配置yarn-site.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml">vi yarn-site.xml<br>#配置内容<br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 指定MR走shuffle --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>mapreduce_shuffle<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 指定ResourceManager的地址--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>master<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 环境变量的继承 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.nodemanager.env-whitelist<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="7-4、配置7-4mapred-site-xml"><a href="#7-4、配置7-4mapred-site-xml" class="headerlink" title="7.4、配置7.4mapred-site.xml"></a>7.4、配置7.4mapred-site.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs xml">#把mapred配置文件的模板复制一份后缀名为.xml的文件<br>cp mapred-site.xml.template mapred-site.xml<br>-----------------------------------------------------------<br>vi mapred-site.xml<br>#配置内容<br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 指定MapReduce程序运行在Yarn上 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>mapreduce.framework.name<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>yarn<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 历史服务器端地址 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>mapreduce.jobhistory.address<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>master:10020<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 历史服务器web端地址 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>master:19888<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="7-5、配置slaves"><a href="#7-5、配置slaves" class="headerlink" title="7.5、配置slaves"></a>7.5、配置slaves</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">vi slaves<br><span class="hljs-comment">#配置内容</span><br><span class="hljs-keyword">master</span><br><span class="hljs-title">slave1</span><br>slave2<br></code></pre></td></tr></table></figure><h4 id="7-6、配置hadoop-env-sh"><a href="#7-6、配置hadoop-env-sh" class="headerlink" title="7.6、配置hadoop-env.sh"></a>7.6、配置hadoop-env.sh</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">vi hadoop-env.sh<br><span class="hljs-comment">#把文件内的JAVA_HOME的路径修改为我们实际的安装路径</span><br>export JAVA_HOME=<span class="hljs-regexp">/opt/</span>apps<span class="hljs-regexp">/jdk/</span><br></code></pre></td></tr></table></figure><h4 id="7-7、在集群上分发配置好的JDK和Hadoop"><a href="#7-7、在集群上分发配置好的JDK和Hadoop" class="headerlink" title="7.7、在集群上分发配置好的JDK和Hadoop"></a>7.7、在集群上分发配置好的JDK和Hadoop</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#在slave1和slave2的/opt目录下新建apps文件夹</span><br>mkdir -p <span class="hljs-regexp">/opt/</span>apps<br><span class="hljs-comment">#分发jdk</span><br>scp -r <span class="hljs-regexp">/opt/</span>apps<span class="hljs-regexp">/jdk/</span> root@slave1:<span class="hljs-regexp">/opt/</span>apps/<br>scp -r <span class="hljs-regexp">/opt/</span>apps<span class="hljs-regexp">/jdk/</span> root@slave2:<span class="hljs-regexp">/opt/</span>apps/<br><span class="hljs-comment">#分发Hadoop</span><br>scp -r <span class="hljs-regexp">/opt/</span>apps<span class="hljs-regexp">/hadoop/</span> root@slave1:<span class="hljs-regexp">/opt/</span>apps/<br>scp -r <span class="hljs-regexp">/opt/</span>apps<span class="hljs-regexp">/hadoop/</span> root@slave2:<span class="hljs-regexp">/opt/</span>apps/<br></code></pre></td></tr></table></figure><h3 id="8、在所有主机上关闭并禁用防火墙。"><a href="#8、在所有主机上关闭并禁用防火墙。" class="headerlink" title="8、在所有主机上关闭并禁用防火墙。"></a>8、在所有主机上关闭并禁用防火墙。</h3><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nsis"><span class="hljs-params">system</span>ctl status firewalld <span class="hljs-comment">#查看防火墙状态</span><br><span class="hljs-params">system</span>ctl stop firewalld &amp; <span class="hljs-params">system</span>ctl disable firewalld.service <span class="hljs-comment">#关闭防火墙并禁用</span><br><span class="hljs-comment">#tip: systemctl disable firewalld.service #禁用防火墙</span><br></code></pre></td></tr></table></figure><h3 id="9、在主机master上格式化NameNode"><a href="#9、在主机master上格式化NameNode" class="headerlink" title="9、在主机master上格式化NameNode"></a>9、在主机master上格式化NameNode</h3><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">hdfs namenode -<span class="hljs-built_in">format</span><br></code></pre></td></tr></table></figure><p>&#x3D;&#x3D;<strong>注：只用做一次！多次格式化会启动会出现问题，只能重装。</strong>&#x3D;&#x3D;</p><h3 id="10、启动Hadoop"><a href="#10、启动Hadoop" class="headerlink" title="10、启动Hadoop"></a>10、启动Hadoop</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">start</span>-<span class="hljs-keyword">all</span>.sh<br></code></pre></td></tr></table></figure><h3 id="11、测试集群"><a href="#11、测试集群" class="headerlink" title="11、测试集群"></a>11、测试集群</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#在hdfs创建文件夹</span><br>hdfs dfs -mkdir -p <span class="hljs-regexp">/user/</span>data<br><span class="hljs-comment">#上传文件到hdfs</span><br>hdfs dfs -put <span class="hljs-regexp">/opt/</span>apps<span class="hljs-regexp">/hadoop/</span>etc<span class="hljs-regexp">/hadoop/m</span>apred-site.xml.template <span class="hljs-regexp">/user/</span>data<br></code></pre></td></tr></table></figure><p>在本地电脑添加IP地址映射，需要修改的文件位于  C:\Windows\System32\drivers\etc  文件夹下，文件名为hosts，添加master、slave1、slave2的IP地址映射。</p><p><code>192.168.128.100 master #ip换成自己的 192.168.128.101 slave1 192.168.128.102 slave2</code></p>]]></content>
    
    
    <categories>
      
      <category>Hadoop</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hadoop</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2022/12/23/hello-world/"/>
    <url>/2022/12/23/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
